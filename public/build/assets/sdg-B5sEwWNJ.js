import{u as A,a as M,r as v,b as l,j as e}from"./app-svE3K3mg.js";import{D as F,g as G,h as L,i as z,j as B,k as N,t as u,A as H}from"./app-layout-CavMusJa.js";import{P as O,T as R,a as U,b as C,c as p,d as V,e as h,E as $,f as q,g as J,h as K,i as Q,j as x,k as W,l as X,m as Y}from"./pagination-BODJ2Bio.js";import{l as Z}from"./lodash-BYxEt48w.js";import{I as j}from"./input-Xs3CdBrf.js";import{B as o}from"./button-Bu5ybxI9.js";import{c as y}from"./utils-CDN07tui.js";import{S as ee,e as se,f as ae,g as re,i as te,j as ne}from"./index-B_yQlDJ4.js";import{L as D,I as b}from"./input-error-CPO7DAgo.js";import"./createLucideIcon-DgzF8neN.js";function le(){const{search:t,sdgs:a}=A().props,{data:w,setData:c,post:g,processing:d,errors:f,clearErrors:i}=M({id:null,name:"",image:null}),[S,P]=v.useState(!1),[m,_]=v.useState(!1),n=(s=!1,r=null)=>{i(),_(s),c(s&&r?{id:r.id,name:r.name,image:null}:{id:null,name:"",image:null}),P(!S)},k=Z.debounce(s=>{l.get("/admin/sdg",{search:s},{preserveState:!0,replace:!0})},1e3),E=()=>{i(),g("/admin/sdg/add",{onSuccess:()=>{n(),u.success("SDG created successfully.")},preserveState:!0,preserveScroll:!0})},T=()=>{i(),g("/admin/sdg/update",{onSuccess:()=>{n(),u.success("SDG updated successfully.")},preserveState:!0,preserveScroll:!0})},I=s=>{i(),l.post("/admin/sdg/delete",{id:s},{onSuccess:()=>{u.success("SDG deleted successfully.")},preserveState:!0,preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(j,{defaultValue:t,onChange:s=>k(s.target.value),className:"max-w-xs",placeholder:"Search...",type:"search"}),e.jsxs(o,{onClick:()=>n(),children:[e.jsx(O,{}),"Create"]})]}),e.jsxs(R,{children:[e.jsx(U,{children:e.jsxs(C,{children:[e.jsx(p,{}),e.jsx(p,{children:"Name"}),e.jsx(p,{className:"text-right"})]})}),e.jsx(V,{children:a.data.map(s=>e.jsxs(C,{children:[e.jsx(h,{children:e.jsx("div",{className:"size-12",children:e.jsx("img",{src:`https://lh3.googleusercontent.com/d/${s.image}`,alt:s.name,className:"size-full object-contain"})})}),e.jsx(h,{className:"uppercase",children:s.name}),e.jsx(h,{className:"text-right",children:e.jsxs(F,{children:[e.jsx(G,{asChild:!0,children:e.jsx(o,{variant:"ghost",className:"size-8 p-0",children:e.jsx($,{})})}),e.jsxs(L,{className:"mr-4",children:[e.jsx(z,{children:"Actions"}),e.jsx(B,{}),e.jsxs(N,{onClick:()=>n(!0,s),className:"text-primary",children:[e.jsx(q,{}),"Edit"]}),e.jsxs(N,{onClick:()=>I(s.id),className:"text-destructive",children:[e.jsx(J,{}),"Delete"]})]})]})})]},s.id))})]}),e.jsx(K,{className:"justify-end",children:e.jsxs(Q,{children:[e.jsx(x,{children:e.jsx(W,{className:y("cursor-default",a.current_page>1?"":"pointer-events-none opacity-50"),onClick:()=>a.current_page>1&&l.get("/admin/sdg",{page:a.current_page-1,search:t??""},{preserveState:!0})})}),Array.from({length:a.last_page},(s,r)=>r+1).map(s=>e.jsx(x,{children:e.jsx(X,{isActive:s===a.current_page,onClick:r=>{r.preventDefault(),l.get("/admin/sdg",{page:s,search:t??""},{preserveState:!0})},className:"cursor-default",children:s})},s)),e.jsx(x,{children:e.jsx(Y,{className:y("cursor-default",a.current_page<a.last_page?"":"pointer-events-none opacity-50"),onClick:()=>a.current_page<a.last_page&&l.get("/admin/sdg",{page:a.current_page+1,search:t??""},{preserveState:!0})})})]})})]}),e.jsx(ee,{open:S,onOpenChange:()=>{d||n()},children:e.jsxs(se,{className:"flex flex-col",children:[e.jsx(ae,{children:e.jsxs(re,{children:[m?"Edit":"Create"," SDG"]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 p-2",children:[e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-2",children:[e.jsx(D,{htmlFor:"image",children:"Image"}),e.jsx(j,{onChange:s=>{const r=s.target.files?.[0]??null;c("image",r)},accept:".jpg,.jpeg,.png",type:"file",id:"image"}),e.jsx(b,{message:f.image})]}),e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-2",children:[e.jsx(D,{htmlFor:"name",children:"Name"}),e.jsx(j,{value:w.name,onChange:s=>c("name",s.target.value),id:"name"}),e.jsx(b,{message:f.name})]})]}),e.jsxs(te,{children:[e.jsx(ne,{disabled:d,asChild:!0,children:e.jsx(o,{variant:"ghost",children:"Cancel"})}),e.jsx(o,{onClick:m?T:E,disabled:d,children:m?"Update":"Save"})]})]})})]})}le.layout=t=>e.jsx(H,{children:t});export{le as default};
